<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#F46900" />
  
  <!-- Primary Meta Tags -->
  <title>Skenpat (Unofficial) | SMKN 4 Banjarmasin</title>
  <meta name="description" content="Website tak resmi SMKN 4 Banjarmasin: ekstrakurikuler, jadwal, profil, visi misi, dan link penting." />
  <meta name="keywords" content="SMKN 4 Banjarmasin, Skenpat, Ekstrakurikuler, Jadwal, OSIS, GG, Green Generation" />
  <meta name="author" content="Thio Saputra, Flessan, Unofficial Skenpat Team" />
  <meta name="robots" content="index,follow" />
  <meta name="google-site-verification" content="LLRTvgE6Hv0v2j79WKysj9p2CQdyWPLxIgvkjRpy2sM" />
  
  <!-- Performance & Security Meta Tags -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="referrer" content="origin-when-cross-origin" />
  <meta http-equiv="Cache-Control" content="max-age=31536000, immutable" />
  
  <!-- Canonical -->
  <link rel="canonical" href="https://skenpat.pages.dev/" />
  
  <!-- Favicon & PWA Icons -->
  <link rel="icon" href="https://res.cloudinary.com/dahcxjdbl/image/upload/v1760687917/faviconV2_s4utef.png" type="image/png" />
  <link rel="apple-touch-icon" href="https://res.cloudinary.com/dahcxjdbl/image/upload/v1760687917/faviconV2_s4utef.png" />
  <link rel="manifest" href="/manifest.json" />
  
  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://skenpat.pages.dev/" />
  <meta property="og:title" content="Skenpat (Unofficial) | SMKN 4 Banjarmasin" />
  <meta property="og:description" content="Website tak resmi SMKN 4 Banjarmasin: jadwal, ekstrakurikuler, link penting, profil, dan visi misi." />
  <meta property="og:image" content="https://skenpat.pages.dev/g.png" />
  <meta property="og:site_name" content="Skenpat SMKN 4 Banjarmasin" />
  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@skenpat" />
  <meta name="twitter:creator" content="@thio2009_" />
  
  <!-- Schema.org -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Skenpat (Unofficial)",
    "url": "https://skenpat.pages.dev/",
    "description": "Website tak resmi tentang SMKN 4 Banjarmasin.",
    "publisher": {
      "@type": "Organization",
      "name": "SMKN 4 Banjarmasin",
      "url": "https://smkn4bjm.sch.id/",
      "logo": { "@type": "ImageObject", "url": "https://skenpat.pages.dev/g.png" }
    }
  }
  </script>
  
  <!-- Preconnect to external domains -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
  <link rel="preconnect" href="https://res.cloudinary.com" />
  <link rel="preconnect" href="https://www3.cbox.ws" />
  <link rel="preconnect" href="https://www.youtube.com" />
  
  <!-- Preload critical resources -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap&font-display=swap" as="style" />
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" />
  <link rel="preload" href="/aset/skenpat.css" as="style" />
  <link rel="preload" href="https://res.cloudinary.com/dahcxjdbl/image/upload/v1760687917/faviconV2_s4utef.png" as="image" />
  
  <!-- Fonts & CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap&font-display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/aset/skenpat.css" />
  
  <!-- Inline critical CSS for faster initial render -->
  <style>
    /* Critical CSS for initial render */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background: #0a0a0a;
      color: #f0f0f0;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100vh;
      overflow-x: hidden;
    }
    .loader {
      position: fixed;
      inset: 0;
      background: #0a0a0a;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      transition: opacity 0.5s, visibility 0.5s;
    }
    .loader.hidden {
      opacity: 0;
      visibility: hidden;
    }
    .loader-circle {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(244, 105, 0, 0.2);
      border-top-color: #F46900;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* --- PERBAIKAN HAMBURGER: Gaya Navbar Umum --- */
    .navbar-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(10, 10, 10, 0.85);
      backdrop-filter: blur(10px);
      z-index: 1000;
      padding: 1rem 0;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    .navbar-menu {
      display: flex;
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .navbar-menu li a {
      color: #f0f0f0;
      text-decoration: none;
      padding: 0.5rem 1rem;
      transition: color 0.3s;
      border-radius: 5px;
    }
    .navbar-menu li a:hover {
      color: #F46900;
    }
    .navbar-toggle {
      display: none; /* Sembunyikan di desktop */
      background: none;
      border: none;
      color: #f0f0f0;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .app-container {
      width: 100%;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.7s forwards;
      animation-delay: 0.3s;
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .fab, .back-to-top {
      position: fixed;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 100;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }
    .fab {
      bottom: 25px;
      right: 25px;
      background: linear-gradient(135deg, #F46900, #FF8A4C);
      color: white;
    }
    .back-to-top {
      bottom: 25px;
      left: 25px;
      background: rgba(30, 30, 30, 0.9);
      backdrop-filter: blur(10px);
      color: #F46900;
      opacity: 0;
      visibility: hidden;
      border: 1px solid rgba(244, 105, 0, 0.3);
    }
    .back-to-top.visible {
      opacity: 1;
      visibility: visible;
    }

    /* --- CSS untuk Music Player (Enhanced) --- */
    .music-player-section {
      width: 100%;
      max-width: 900px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .soundcloud-player {
      background: linear-gradient(135deg, #1e1e1e, #2a2a2a);
      border-radius: 12px;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      border: 1px solid rgba(244, 105, 0, 0.2);
    }

    .player-artwork-info {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
    }

    .player-artwork-info img {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      background: #333;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .player-track-info-text {
      display: flex;
      flex-direction: column;
    }

    .player-track-title {
      font-weight: 600;
      color: #f0f0f0;
      font-size: 1rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 150px;
    }

    .player-track-artist {
      font-size: 0.8rem;
      color: #aaa;
    }

    .player-controls-progress {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .player-main-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }

    .player-main-controls button {
      background: none;
      border: none;
      color: #aaa;
      cursor: pointer;
      transition: all 0.2s;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .player-main-controls button:hover {
      color: #f0f0f0;
      background: rgba(255, 255, 255, 0.1);
    }

    .player-main-controls .main-play-btn {
      color: #F46900;
      font-size: 1.4rem;
      width: 50px;
      height: 50px;
      background: rgba(244, 105, 0, 0.1);
    }

    .player-main-controls .main-play-btn:hover {
      background: rgba(244, 105, 0, 0.2);
    }

    .player-main-controls .main-play-btn.playing {
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(244, 105, 0, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(244, 105, 0, 0); }
      100% { box-shadow: 0 0 0 0 rgba(244, 105, 0, 0); }
    }

    .player-progress-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .player-progress-bar {
      flex-grow: 1;
      height: 6px;
      -webkit-appearance: none;
      appearance: none;
      background: #444;
      border-radius: 3px;
      outline: none;
      cursor: pointer;
    }

    .player-progress-bar::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px;
      height: 14px;
      background: #F46900;
      border-radius: 50%;
      cursor: pointer;
    }

    .player-progress-bar::-moz-range-thumb {
      width: 14px;
      height: 14px;
      background: #F46900;
      border-radius: 50%;
      cursor: pointer;
      border: none;
    }

    .player-time-display {
      font-size: 0.75rem;
      color: #aaa;
      min-width: 45px;
      text-align: center;
    }

    .player-extras {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
    }

    .player-extras button {
      background: none;
      border: none;
      color: #aaa;
      cursor: pointer;
      transition: all 0.2s;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .player-extras button:hover {
      color: #f0f0f0;
      background: rgba(255, 255, 255, 0.1);
    }

    .volume-control {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .volume-slider {
      width: 70px;
      height: 4px;
      -webkit-appearance: none;
      appearance: none;
      background: #444;
      border-radius: 2px;
      outline: none;
      cursor: pointer;
    }

    .volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 12px;
      height: 12px;
      background: #F46900;
      border-radius: 50%;
      cursor: pointer;
    }

    .volume-slider::-moz-range-thumb {
      width: 12px;
      height: 12px;
      background: #F46900;
      border-radius: 50%;
      cursor: pointer;
      border: none;
    }
    
    .download-btn {
      background: linear-gradient(135deg, #F46900, #FF8A4C);
      color: white;
      border: none;
      border-radius: 20px;
      padding: 8px 12px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .download-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(244, 105, 0, 0.3);
    }
    
    /* Playlist Section */
    .playlist-section {
      margin-top: 20px;
      background: rgba(30, 30, 30, 0.6);
      border-radius: 12px;
      padding: 15px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .playlist-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .playlist-title {
      font-size: 1rem;
      font-weight: 600;
      color: #f0f0f0;
    }
    
    .playlist-toggle {
      background: none;
      border: none;
      color: #aaa;
      cursor: pointer;
      font-size: 0.9rem;
      transition: color 0.2s;
    }
    
    .playlist-toggle:hover {
      color: #F46900;
    }
    
    .playlist-items {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }
    
    .playlist-items.active {
      max-height: 300px;
      overflow-y: auto;
    }
    
    .playlist-item {
      display: flex;
      align-items: center;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .playlist-item:hover {
      background: rgba(255, 255, 255, 0.05);
    }
    
    .playlist-item.active {
      background: rgba(244, 105, 0, 0.1);
    }
    
    .playlist-item-icon {
      margin-right: 10px;
      color: #F46900;
    }
    
    .playlist-item-info {
      flex-grow: 1;
    }
    
    .playlist-item-title {
      font-size: 0.9rem;
      color: #f0f0f0;
    }
    
    .playlist-item-artist {
      font-size: 0.75rem;
      color: #aaa;
    }
    
    /* Modal Lirik */
    #lyrics-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1002;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
      padding: 20px;
    }
    #lyrics-modal.visible {
      opacity: 1;
      visibility: visible;
    }
    .lyrics-content-wrapper {
      background: linear-gradient(to bottom, #282828, #181818);
      border-radius: 12px;
      max-width: 600px;
      width: 100%;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }
    .lyrics-header {
      padding: 20px;
      border-bottom: 1px solid #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .lyrics-header h2 {
      font-size: 1.2rem;
      font-weight: 600;
    }
    .lyrics-header button {
      background: none;
      border: none;
      color: #aaa;
      font-size: 1.5rem;
      cursor: pointer;
    }
    .lyrics-body {
      padding: 30px;
      overflow-y: auto;
      flex-grow: 1;
    }
    .lyrics-body::-webkit-scrollbar {
      width: 8px;
    }
    .lyrics-body::-webkit-scrollbar-track {
      background: transparent;
    }
    .lyrics-body::-webkit-scrollbar-thumb {
      background: #555;
      border-radius: 4px;
    }
    .lyrics-text {
      text-align: center;
      font-size: 1.2rem;
      line-height: 2.2;
      color: #ccc;
    }
    .lyrics-text p {
      margin-bottom: 1em;
      transition: color 0.3s, transform 0.3s;
    }
    .lyrics-text p:hover {
      color: #fff;
      transform: scale(1.05);
    }
    
    /* Timeline Section */
    .timeline-section {
      width: 100%;
      max-width: 900px;
      margin: 60px auto;
      padding: 0 20px;
    }
    
    .section-title {
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 50px;
      color: #f0f0f0;
      position: relative;
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: linear-gradient(90deg, #F46900, #FF8A4C);
      border-radius: 2px;
    }
    
    .timeline {
      position: relative;
      padding: 20px 0;
    }
    
    .timeline::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 100%;
      background: linear-gradient(to bottom, #F46900, #FF8A4C);
      border-radius: 2px;
    }
    
    .timeline-item {
      position: relative;
      margin-bottom: 50px;
      width: 50%;
      padding: 0 30px;
    }
    
    .timeline-item:nth-child(odd) {
      left: 0;
      text-align: right;
    }
    
    .timeline-item:nth-child(even) {
      left: 50%;
      text-align: left;
    }
    
    .timeline-content {
      background: rgba(30, 30, 30, 0.7);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(244, 105, 0, 0.2);
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .timeline-content:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(244, 105, 0, 0.2);
      border-color: rgba(244, 105, 0, 0.4);
    }
    
    .timeline-date {
      font-size: 0.9rem;
      color: #F46900;
      font-weight: 600;
      margin-bottom: 10px;
    }
    
    .timeline-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #f0f0f0;
      margin-bottom: 10px;
    }
    
    .timeline-description {
      font-size: 0.9rem;
      color: #ccc;
      line-height: 1.6;
    }
    
    .timeline-icon {
      position: absolute;
      top: 20px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #F46900;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
      box-shadow: 0 0 0 4px rgba(244, 105, 0, 0.2);
      z-index: 1;
    }
    
    .timeline-item:nth-child(odd) .timeline-icon {
      right: -20px;
    }
    
    .timeline-item:nth-child(even) .timeline-icon {
      left: -20px;
    }
    
    .timeline-details {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
      margin-top: 15px;
    }
    
    .timeline-details.active {
      max-height: 300px;
    }
    
    .timeline-details p {
      font-size: 0.85rem;
      color: #aaa;
      line-height: 1.6;
      padding-top: 10px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .timeline-toggle {
      display: inline-block;
      margin-top: 10px;
      color: #F46900;
      font-size: 0.85rem;
      cursor: pointer;
      transition: color 0.2s;
    }
    
    .timeline-toggle:hover {
      color: #FF8A4C;
    }
    
    /* --- PERBAIKAN HAMBURGER: CSS untuk Mobile --- */
    @media (max-width: 768px) {
      /* Tampilkan tombol hamburger */
      .navbar-toggle {
        display: block;
      }

      /* Sembunyikan menu navigasi default */
      .navbar-menu {
        position: fixed;
        top: 0;
        left: 0;
        width: 80%;
        max-width: 300px;
        height: 100vh;
        background: rgba(20, 20, 20, 0.98);
        backdrop-filter: blur(10px);
        flex-direction: column;
        padding: 5rem 1rem 2rem;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        z-index: 999; /* Di bawah navbar (1000) */
      }

      /* Tampilkan menu saat aktif */
      .navbar-menu.active {
        transform: translateX(0);
      }

      /* Gaya untuk item menu di mobile */
      .navbar-menu li {
        width: 100%;
        margin-bottom: 0.5rem;
      }
      .navbar-menu li a {
        display: block;
        padding: 0.75rem 1rem;
        color: #f0f0f0;
        text-decoration: none;
        border-radius: 5px;
        transition: background-color 0.2s, color 0.2s;
      }
      .navbar-menu li a:hover {
        color: #F46900;
        background-color: rgba(244, 105, 0, 0.1);
      }
      
      /* Gaya untuk overlay */
      .menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 998; /* Di bawah menu (999) */
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s, visibility 0.3s;
      }
      .menu-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      /* Responsif untuk player */
      .soundcloud-player {
        flex-wrap: wrap;
        justify-content: center;
      }
      .player-artwork-info {
        width: 100%;
        justify-content: center;
        margin-bottom: 10px;
      }
      .player-controls-progress {
        width: 100%;
        order: 3;
      }
      .player-extras {
        width: 100%;
        justify-content: center;
        order: 2;
        margin-top: 5px;
      }
      .player-track-title {
        max-width: 200px;
      }
      
      /* Timeline responsive */
      .timeline::before {
        left: 20px;
      }
      
      .timeline-item {
        width: 100%;
        padding-left: 60px;
        padding-right: 20px;
        text-align: left !important;
        left: 0 !important;
      }
      
      .timeline-icon {
        left: 0 !important;
        right: auto !important;
      }
    }
  </style>
  
  <!-- Defer non-critical CSS -->
  <link rel="stylesheet" href="/aset/non-critical.css" media="print" onload="this.media='all'">
  
  <!-- Preconnect for DNS prefetching -->
  <link rel="dns-prefetch" href="//fonts.googleapis.com" />
  <link rel="dns-prefetch" href="//fonts.gstatic.com" />
  <link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />
  <link rel="dns-prefetch" href="//res.cloudinary.com" />
</head>
<body>
  <!-- Loading Screen -->
  <div class="loader" id="loader">
    <div class="loader-circle"></div>
  </div>

  <!-- Enhanced Navigation -->
  <nav class="navbar" id="navbar">
    <div class="navbar-container">
      <div class="navbar-logo">
        <img src="https://res.cloudinary.com/dahcxjdbl/image/upload/v1760687917/faviconV2_s4utef.png" alt="SMKN4BJM Logo">
        <span>SMKN4BJM</span>
      </div>
      <ul class="navbar-menu" id="navbar-menu">
        <li><a href="#home">Beranda</a></li>
        <li><a href="#links">Link Penting</a></li>
        <li><a href="#team">Tim</a></li>
        <li><a href="#profile">Profil</a></li>
        <li><a href="#music-player">Mars</a></li>
        <li><a href="#timeline">Acara</a></li>
      </ul>
      <button class="navbar-toggle" id="navbar-toggle" aria-label="Toggle navigation">
        <i class="fas fa-bars"></i>
      </button>
    </div>
  </nav>

  <!-- Back to Top Button -->
  <button class="back-to-top" id="backToTop" aria-label="Kembali ke atas">
    <i class="fas fa-arrow-up"></i>
  </button>

  <!-- Floating Action Button -->
  <button class="fab" id="fab" aria-label="Fun fact">
    <i class="fas fa-lightbulb"></i>
  </button>

  <!-- MINI PLAYER AUDIO -->
  <audio id="audio-player" src="https://rawcdn.githack.com/flessan/skenpat/1e3207c528d4df56558ddd80b65e0cf893071a05/aset/marsskenpat.mp3" preload="metadata"></audio>
  
  <!-- MODAL LIRIK -->
  <div id="lyrics-modal">
    <div class="lyrics-content-wrapper">
      <div class="lyrics-header">
        <h2>Mars SMKN 4 Banjarmasin</h2>
        <button id="close-lyrics-btn"><i class="fas fa-times"></i></button>
      </div>
      <div class="lyrics-body">
        <div class="lyrics-text">
          <p><strong>MARS SMKN 4 BANJARMASIN</strong></p>
          <br>
          <p>SMK NEGERI 4 BANJARMASIN</p>
          <p>SEKOLAH YANG ISTIMEWA</p>
          <p>DENGAN STANDAR KUALITAS PRIMA</p>
          <p>BAGI NUSA BANGSA DAN NEGARA</p>
          <br>
          <p>SMK NEGERI 4 BANJARMASIN</p>
          <p>MENEMPA SISWA JUARA</p>
          <p>DIDIDIK DENGAN PENUH SUKA CITA</p>
          <p>MEMBANGUN BANUA KITA</p>
          <br>
          <p>SMK NEGERI 4 BANJARMASIN</p>
          <p>TERUS BERKARYA BAGI BANGSA</p>
          <p>SMK NEGERI 4 BANJARMASIN</p>
          <p>S’MOGA S’LALU DALAM LINDUNGANNYA</p>
          <br>
          <p>SMK NEGERI 4 BANJARMASIN</p>
          <p>BERLANDASKAN PANCASILA</p>
          <p>BERBUDAYA, BERIMAN DAN BERTAKWA</p>
          <p>MEMBANGUN INDONESIA</p>
          <br>
          <p>SMK NEGERI 4 BANJARMASIN</p>
          <p>TERUS BERKARYA BAGI BANGSA</p>
          <p>SMK NEGERI 4 BANJARMASIN</p>
          <p>S’MOGA S’LALU DALAM LINDUNGANNYA</p>
        </div>
      </div>
    </div>
  </div>

  <div class="app-container" id="home">
    <main class="app">
      <div class="content-wrapper">
        <header class="header">
          <div class="header-badge">Unofficial Website</div>
          <h1>SMKN4BJM</h1>
          <p>Portal Informasi Terpadu SMK Negeri 4 Banjarmasin</p>
        </header>

        <section class="card-balance">
          <h2>Portal Utama</h2>
          <p class="coins">Akses cepat ke informasi penting</p>
          <div class="actions">
            <a href="/eskul">
              <i class="fas fa-calendar-alt"></i>ㅤEkstrakurikuler
            </a>
            <a href="/mapel">
              <i class="fas fa-book-open"></i>ㅤJadwal Mapel
            </a>
          </div>
        </section>

        <!-- Enhanced Cbox -->
        <div class="cbox-wrapper">
          <iframe
            src="https://www3.cbox.ws/box/?boxid=3549497&boxtag=18ooNP"
            width="100%"
            height="450"
            loading="lazy"
            frameborder="0"
            title="ChitChat Skenpat"
            style="border: none; display: block; background: transparent; margin-top: 40px;"
            referrerpolicy="no-referrer"
          ></iframe>
        </div>

        <section class="section" id="links">
          <div class="section-header">
            <h3><i class="fas fa-link"></i> Kumpulan Link Terkait</h3>
            <a href="https://smkn4bjm.sch.id" rel="noopener">Lihat semua <i class="fas fa-arrow-right"></i></a>
          </div>
          <div class="grid">
            <a href="https://smkn4bjm.sch.id/berita" class="btn" rel="noopener">
              <i class="fa-solid fa-newspaper icon" aria-hidden="true"></i>
              <span>Berita</span>
            </a>
            <a href="https://smkn4bjm.sch.id/perpustakaan-sekolah" class="btn" rel="noopener">
              <i class="fa-solid fa-book icon" aria-hidden="true"></i>
              <span>Perpus</span>
            </a>
            <a href="https://smkn4bjm.sch.id/prestasi" class="btn" rel="noopener">
              <i class="fa-solid fa-trophy icon" aria-hidden="true"></i>
              <span>Prestasi</span>
            </a>
            <a href="https://smkn4bjm.sch.id/sejarah-sekolah" class="btn" rel="noopener">
              <i class="fa-solid fa-history icon" aria-hidden="true"></i>
              <span>Sejarah</span>
            </a>
            <a href="/spin" class="btn" rel="noopener">
              <i class="fa-solid fa-dharmachakra icon" aria-hidden="true"></i>
              <span>Wheel</span>
            </a>
          </div>
        </section>

        <section class="section" id="team">
          <div class="section-header">
            <h3><i class="fas fa-users"></i> Skenpat Team</h3>
            <a href="https://smkn4bjm.sch.id" rel="noopener">Lihat semua <i class="fas fa-arrow-right"></i></a>
          </div>
          <div class="grid">
            <a href="https://smkn4bjm.sch.id/tim-manajemen" class="btn" rel="noopener">
              <i class="fa-solid fa-users icon" aria-hidden="true"></i>
              <span>Tim Inti</span>
            </a>
            <a href="https://smkn4bjm.sch.id/tentang-kami/tenaga-pendidik" class="btn" rel="noopener">
              <i class="fa-solid fa-chalkboard-user icon" aria-hidden="true"></i>
              <span>Pendidik</span>
            </a>
            <a href="https://smkn4bjm.sch.id/tentang-kami/tenaga-kependidikan" class="btn" rel="noopener">
              <i class="fa-solid fa-user-tie icon" aria-hidden="true"></i>
              <span>Kependidikan</span>
            </a>
            <a href="https://smkn4bjm.sch.id/wp-content/uploads/2024/12/Struktur-Sekolah-2024-november.jpg" class="btn" rel="noopener">
              <i class="fa-solid fa-sitemap icon" aria-hidden="true"></i>
              <span>Struktur</span>
            </a>
            <a href="/osis" class="btn">
              <i class="fa-solid fa-layer-group icon" aria-hidden="true"></i>
              <span>OSIS</span>
            </a>
            <a href="/green" class="btn">
              <i class="fa-solid fa-leaf icon" aria-hidden="true"></i>
              <span>GG</span>
            </a>
          </div>
        </section>

        <section class="visi-misi" id="profile">
          <h2>Profil SMK Negeri 4 Banjarmasin</h2>
          <div class="video-container">
            <iframe
              src="https://www.youtube.com/embed/XQKoNTQTrkM?mute=1"
              title="Profil SMKN 4 Banjarmasin"
              allowfullscreen
              loading="lazy"
            ></iframe>
          </div>

          <h3>Visi</h3>
          <p>Mewujudkan Lulusan Yang Kompeten, Berkarakter, Berdaya Saing, Siap Menghadapi Dunia Kerja Dan Perkembangan Teknologi Berlandaskan Nilai-nilai Luhur Pancasila</p>

          <h3>Misi</h3>
          <ul>
            <li>Mewujudkan Peserta Didik Yang Memiliki Profil Pelajar Pancasila Dan Budaya Kerja.</li>
            <li>Melaksanakan Program Pendidikan Inklusif.</li>
            <li>Melaksanakan Pembelajaran Berbasis Teaching Factory (ТЕFА).</li>
            <li>Mengembangkan Manajemen Berbasis Data Dan Digital Yang Mendukung Efektivitas Layanan.</li>
            <li>Menyediakan Sarana Dan Prasarana Yang Sesuai Dengan Standar Dunia Kerja Dan Perkembangan Teknologi</li>
            <li>Memperkuat Kemitraan Dengan Dunia Kerja Dan Stakeholder.</li>
            <li>Memfasilitasi Lulusan Memiliki Sertifikat Uji Kompetensi Vang Diterbitkan Oleh BNSP.</li>
            <li>Menumbuhkan Wawasan Dan Kepedulian Warga Sekolah Terhadap Lingkungan Hidup Dan Budaya Lokal.</li>
          </ul>

          <h6>- This website is not the school's official website.</h6>
        </section>

        <!-- MUSIC PLAYER SECTION -->
        <section class="music-player-section" id="music-player">
          <div class="soundcloud-player">
            <div class="player-artwork-info">
              <img src="https://res.cloudinary.com/dahcxjdbl/image/upload/v1760687917/faviconV2_s4utef.png" alt="Album Art">
              <div class="player-track-info-text">
                <span class="player-track-title">Mars Skenpat</span>
                <span class="player-track-artist">SMKN 4 Banjarmasin</span>
              </div>
            </div>

            <button class="download-btn" id="download-btn">
                <i class="fas fa-download"></i> donlot
              </button>
            
            <div class="player-controls-progress">
              <div class="player-main-controls">
                <button id="prev-btn"><i class="fas fa-backward"></i></button>
                <button class="main-play-btn" id="play-pause-btn"><i class="fas fa-play"></i></button>
                <button id="next-btn"><i class="fas fa-forward"></i></button>
              </div>
              
              <div class="player-progress-container">
                <span class="player-time-display" id="current-time">0:00</span>
                <input type="range" class="player-progress-bar" id="progress-bar" value="0" max="100">
                <span class="player-time-display" id="total-time">0:00</span>
              </div>
            </div>
            
            <div class="player-extras">
              <div class="volume-control">
                <button id="volume-btn"><i class="fas fa-volume-up"></i></button>
                <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="70">
              </div>
              <button id="show-lyrics-modal-btn"><i class="fas fa-align-left"></i></button>
            </div>
          </div>
          
          <!-- Playlist Section -->
          <div class="playlist-section">
            <div class="playlist-header">
              <span class="playlist-title">Playlist Lagu</span>
              <button class="playlist-toggle" id="playlist-toggle">
                <i class="fas fa-chevron-down"></i> Tampilkan
              </button>
            </div>
            <div class="playlist-items" id="playlist-items">
              <div class="playlist-item active" data-src="https://rawcdn.githack.com/flessan/skenpat/1e3207c528d4df56558ddd80b65e0cf893071a05/aset/marsskenpat.mp3">
                <i class="fas fa-music playlist-item-icon"></i>
                <div class="playlist-item-info">
                  <div class="playlist-item-title">Mars Skenpat</div>
                  <div class="playlist-item-artist">SMKN 4 Banjarmasin</div>
                </div>
              </div>
              <div class="playlist-item" data-src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3">
                <i class="fas fa-music playlist-item-icon"></i>
                <div class="playlist-item-info">
                  <div class="playlist-item-title">Hymne Sekolah</div>
                  <div class="playlist-item-artist">SMKN 4 Banjarmasin</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- TIMELINE SECTION -->
        <section class="timeline-section" id="timeline">
          <h2 class="section-title">Jadwal Acara Sekolah</h2>
          <div class="timeline">
            <div class="timeline-item">
              <div class="timeline-icon">
                <i class="fas fa-calendar-check"></i>
              </div>
              <div class="timeline-content">
                <div class="timeline-date">15 Januari 2025</div>
                <div class="timeline-title">Pembukaan Semester Genap</div>
                <div class="timeline-description">Upacara pembukaan semester genap tahun ajaran 2024/2025</div>
                <div class="timeline-toggle" data-target="details-1">Selengkapnya <i class="fas fa-chevron-down"></i></div>
                <div class="timeline-details" id="details-1">
                  <p>Upacara pembukaan semester genap akan dilaksanakan di halaman sekolah pukul 07.00 WITA. Semua siswa diwajibkan hadir dengan menggunakan seragam sekolah lengkap. Acara akan dihadiri oleh Kepala Sekolah, Dewan Guru, dan perwakilan komite sekolah.</p>
                </div>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-icon">
                <i class="fas fa-trophy"></i>
              </div>
              <div class="timeline-content">
                <div class="timeline-date">20-25 Januari 2025</div>
                <div class="timeline-title">Pekan Olahraga Sekolah</div>
                <div class="timeline-description">Kompetisi olahraga antar kelas untuk memperingati Hari Olahraga Nasional</div>
                <div class="timeline-toggle" data-target="details-2">Selengkapnya <i class="fas fa-chevron-down"></i></div>
                <div class="timeline-details" id="details-2">
                  <p>Pekan Olahraga Sekolah akan berlangsung selama 6 hari dengan berbagai cabang olahraga seperti futsal, bola voli, bulu tangkis, dan atletik. Setiap kelas wajib mengirimkan perwakilannya untuk berpartisipasi. Pendaftaran dapat dilakukan melalui wali kelas masing-masing.</p>
                </div>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-icon">
                <i class="fas fa-palette"></i>
              </div>
              <div class="timeline-content">
                <div class="timeline-date">10 Februari 2025</div>
                <div class="timeline-title">Festival Seni dan Budaya</div>
                <div class="timeline-description">Pameran karya seni siswa dan pertunjukan budaya Banjar</div>
                <div class="timeline-toggle" data-target="details-3">Selengkapnya <i class="fas fa-chevron-down"></i></div>
                <div class="timeline-details" id="details-3">
                  <p>Festival Seni dan Budaya akan menampilkan berbagai karya seni siswa mulai dari lukisan, patung, hingga karya digital. Selain itu, akan ada pertunjukan tari tradisional Banjar dan musik khas daerah. Acara ini terbuka untuk umum dan orang tua siswa.</p>
                </div>
              </div>
            </div>
            
            <div class="timeline-item">
              <div class="timeline-icon">
                <i class="fas fa-laptop-code"></i>
              </div>
              <div class="timeline-content">
                <div class="timeline-date">5 Maret 2025</div>
                <div class="timeline-title">Kompetisi Teknologi</div>
                <div class="timeline-description">Lomba programming, robotik, dan desain grafis antar siswa</div>
                <div class="timeline-toggle" data-target="details-4">Selengkapnya <i class="fas fa-chevron-down"></i></div>
                <div class="timeline-details" id="details-4">
                  <p>Kompetisi Teknologi akan terdiri dari tiga kategori: programming (web dan mobile), robotik (line follower dan soccer), serta desain grafis. Pendaftaran dibuka mulai 15 Februari 2025 melalui portal ekstrakurikuler. Pemenang akan menerima beasiswa dan trofi.</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <footer class="footer">
          <div class="footer-links">
            <a href="https://flessan.pages.dev" rel="noopener">Developer</a>
            <a href="#" onclick="showPrivacyPolicy()">Privacy Policy</a>
            <a href="#" onclick="showTermsOfService()">Terms of Service</a>
          </div>
          &copy; 2025 <a href="https://flessan.pages.dev" rel="noopener">Unofficial Skenpat Pages</a> | SMKN 4 Banjarmasin
        </footer>
      </div>
    </main>
  </div>

  <!-- Defer non-critical JavaScript -->
  <script src="/aset/sken.js" defer></script>
  
  <!-- Inline critical JavaScript -->
  <script>
    // Service Worker Registration for Caching
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/aset/sw.js')
          .then(registration => {
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
          })
          .catch(error => {
            console.log('ServiceWorker registration failed: ', error);
          });
      });
    }
    
    // Enhanced Loader
    window.addEventListener('load', () => {
      setTimeout(() => {
        const loader = document.getElementById('loader');
        if (loader) {
          loader.classList.add('hidden');
          
          // Remove loader from DOM after transition completes
          loader.addEventListener('transitionend', () => {
            loader.remove();
          });
        }
      }, 400);
    });
    
    // Enhanced Navigation
    document.addEventListener('DOMContentLoaded', () => {
      const navbar = document.getElementById('navbar');
      const navbarToggle = document.getElementById('navbar-toggle');
      const navbarMenu = document.getElementById('navbar-menu');
      const backBtn = document.getElementById('backToTop');
      const fab = document.getElementById('fab');
      
      // Create menu overlay for mobile
      const menuOverlay = document.createElement('div');
      menuOverlay.className = 'menu-overlay';
      document.body.appendChild(menuOverlay);
      
      // Toggle mobile menu
      navbarToggle.addEventListener('click', () => {
        navbarMenu.classList.toggle('active');
        menuOverlay.classList.toggle('active');
      });
      
      // Close mobile menu when clicking on overlay
      menuOverlay.addEventListener('click', () => {
        navbarMenu.classList.remove('active');
        menuOverlay.classList.remove('active');
      });
      
      // Close mobile menu when clicking on a link
      navbarMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          navbarMenu.classList.remove('active');
          menuOverlay.classList.remove('active');
        });
      });
      
      // Back to top button
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          backBtn.classList.add('visible');
        } else {
          backBtn.classList.remove('visible');
        }
      });
      
      backBtn.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
      
      // Fun fact button
      fab.addEventListener('click', () => {
        const funFacts = [
          "SMKN 4 Banjarmasin memiliki lebih dari 20 ekstrakurikuler aktif!",
          "Siswa SMKN 4 Banjarmasin telah meraih lebih dari 50 penghargaan tingkat nasional!",
          "SMKN 4 Banjarmasin memiliki program dual education system dengan industri!",
          "SMKN 4 Banjarmasin adalah salah satu sekolah vokasi terbaik di Kalimantan Selatan!",
          "Setiap tahun, SMKN 4 Banjarmasin mengirim siswa untuk magang ke Jepang!"
        ];
        
        const randomFact = funFacts[Math.floor(Math.random() * funFacts.length)];
        
        showModal("Fun Fact", `<p style="text-align: center; padding: 20px;">${randomFact}</p>`);
      });
      
      // PERBAIKAN: Membuat modal lebih robust dengan class overlay
      window.showModal = function(title, content) {
        const modal = document.createElement('div');
        modal.className = 'modal-overlay'; // PERBAIKAN: Gunakan class untuk selector yang lebih stabil
        modal.style.cssText = `
          position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 10000;
          display: flex; align-items: center; justify-content: center; padding: 1rem;
          backdrop-filter: blur(5px);
        `;
        
        modal.innerHTML = `
          <div class="modal-content-wrapper" style="background: #1e1e1e; border-radius: 20px; max-width: 90vw; max-height: 90vh; overflow-y: auto; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 20px 60px rgba(0,0,0,0.5); position: relative;">
            <div style="padding: 2rem;">
              <h2 style="color: #F46900; margin-bottom: 1.5rem;">${title}</h2>
              ${content}
              <button onclick="this.closest('.modal-overlay').remove()" style="margin-top: 1.5rem; padding: 0.75rem 1.5rem; background: #F46900; color: white; border: none; border-radius: 30px; font-weight: 600; cursor: pointer;">Tutup</button>
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
        
        // Close on outside click
        modal.addEventListener('click', (e) => {
          if (e.target === modal) modal.remove();
        });
      };

      // Privacy Policy & Terms of Service
      window.showPrivacyPolicy = function() {
        const content = `
          <div style="max-width: 600px; margin: 0 auto; padding: 2rem; background: #1e1e1e; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);">
            <h2 style="color: #F46900; margin-bottom: 1.5rem;">Kebijakan Privasi</h2>
            <p>Kami tidak mengumpulkan data pribadi apa pun dari pengunjung website ini. Website ini murni untuk informasi dan tidak memiliki fitur yang memerlukan data pribadi.</p>
            <p>Kami menggunakan cookie minimal untuk pengalaman pengguna yang lebih baik, tetapi tidak melacak aktivitas pribadi Anda. <a href="https://flessan.pages.dev/#contact" target="_blank" style="color:#ffd966;text-decoration:underline;">lebih lengkap disini!</a></p>
            <p style="margin-top: 1.5rem;">Terakhir diperbarui: Januari 2025</p>
          </div>
        `;
        showModal("Kebijakan Privasi", content);
      };
      
      window.showTermsOfService = function() {
        const content = `
          <div style="max-width: 600px; margin: 0 auto; padding: 2rem; background: #1e1e1e; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);">
            <h2 style="color: #F46900; margin-bottom: 1.5rem;">Syarat & Ketentuan</h2>
            <p>Website ini adalah website tidak resmi yang dibuat untuk siswa SMKN 4 Banjarmasin. Kami tidak berafiliasi dengan pihak sekolah secara resmi.</p>
            <p>Semua informasi di website ini bersifat informatif dan kami berusaha untuk menyajikan informasi yang akurat. Namun, kami tidak bertanggung jawab atas ketidakakuratan informasi yang mungkin ada.</p>
            <p>Fun Fact: Site ini Sudah diakui oleh Guru Informatika Dan Guru Pemrograman Dasar SMK Negeri 4 Banjarmasin.</p>
            <p style="margin-top: 1.5rem;">Terakhir diperbarui: Januari 2025</p>
          </div>
        `;
        showModal("Syarat & Ketentuan", content);
      };
      
      // Add keyframes dynamically
      if (!document.getElementById('dynamic-styles')) {
        const style = document.createElement('style');
        style.id = 'dynamic-styles';
        style.textContent = `
          @keyframes floaty {
            0% { transform: translateY(0) scale(1); }
            100% { transform: translateY(-80px) scale(1.3); }
          }
          @keyframes fadeInNotif {
            from { opacity: 0; transform: translateY(40px) scale(0.96); }
            to { opacity: 1; transform: translateY(0) scale(1); }
          }
        `;
        document.head.appendChild(style);
      }
      
      // Smooth scroll for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
      
      // Music Player Functionality
      const audioPlayer = document.getElementById('audio-player');
      const playPauseBtn = document.getElementById('play-pause-btn');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      const progressBar = document.getElementById('progress-bar');
      const currentTimeEl = document.getElementById('current-time');
      const totalTimeEl = document.getElementById('total-time');
      const volumeBtn = document.getElementById('volume-btn');
      const volumeSlider = document.getElementById('volume-slider');
      const lyricsBtn = document.getElementById('show-lyrics-modal-btn');
      const lyricsModal = document.getElementById('lyrics-modal');
      const closeLyricsBtn = document.getElementById('close-lyrics-btn');
      const downloadBtn = document.getElementById('download-btn');
      const playlistToggle = document.getElementById('playlist-toggle');
      const playlistItems = document.getElementById('playlist-items');
      const playlistItemElements = document.querySelectorAll('.playlist-item');
      
      // Set initial volume
      audioPlayer.volume = 0.7;
      
      // Play/Pause functionality
      playPauseBtn.addEventListener('click', () => {
        if (audioPlayer.paused) {
          audioPlayer.play();
          playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
          playPauseBtn.classList.add('playing');
        } else {
          audioPlayer.pause();
          playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
          playPauseBtn.classList.remove('playing');
        }
      });
      
      // Update progress bar
      audioPlayer.addEventListener('timeupdate', () => {
        const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
        progressBar.value = progress;
        
        // Update current time
        const currentMinutes = Math.floor(audioPlayer.currentTime / 60);
        const currentSeconds = Math.floor(audioPlayer.currentTime % 60);
        currentTimeEl.textContent = `${currentMinutes}:${currentSeconds < 10 ? '0' : ''}${currentSeconds}`;
      });
      
      // Set total time when metadata is loaded
      audioPlayer.addEventListener('loadedmetadata', () => {
        const durationMinutes = Math.floor(audioPlayer.duration / 60);
        const durationSeconds = Math.floor(audioPlayer.duration % 60);
        totalTimeEl.textContent = `${durationMinutes}:${durationSeconds < 10 ? '0' : ''}${durationSeconds}`;
      });
      
      // Seek in the audio when progress bar is changed
      progressBar.addEventListener('input', () => {
        const seekTime = (progressBar.value / 100) * audioPlayer.duration;
        audioPlayer.currentTime = seekTime;
      });
      
      // Volume control
      volumeSlider.addEventListener('input', () => {
        audioPlayer.volume = volumeSlider.value / 100;
        
        // Update volume icon based on volume level
        if (volumeSlider.value == 0) {
          volumeBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
        } else if (volumeSlider.value < 50) {
          volumeBtn.innerHTML = '<i class="fas fa-volume-down"></i>';
        } else {
          volumeBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
        }
      });
      
      // Toggle mute when volume button is clicked
      volumeBtn.addEventListener('click', () => {
        if (audioPlayer.volume > 0) {
          // Save current volume
          volumeBtn.dataset.prevVolume = audioPlayer.volume;
          audioPlayer.volume = 0;
          volumeSlider.value = 0;
          volumeBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
        } else {
          // Restore previous volume
          const prevVolume = volumeBtn.dataset.prevVolume || 0.7;
          audioPlayer.volume = prevVolume;
          volumeSlider.value = prevVolume * 100;
          
          if (prevVolume < 0.5) {
            volumeBtn.innerHTML = '<i class="fas fa-volume-down"></i>';
          } else {
            volumeBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
          }
        }
      });
      
      // Show lyrics modal
      lyricsBtn.addEventListener('click', () => {
        lyricsModal.classList.add('visible');
      });
      
      // Close lyrics modal
      closeLyricsBtn.addEventListener('click', () => {
        lyricsModal.classList.remove('visible');
      });
      
      // Close lyrics modal when clicking outside
      lyricsModal.addEventListener('click', (e) => {
        if (e.target === lyricsModal) {
          lyricsModal.classList.remove('visible');
        }
      });
      
      // Download functionality
      downloadBtn.addEventListener('click', () => {
        const audioSrc = audioPlayer.src;
        const a = document.createElement('a');
        a.href = audioSrc;
        a.download = 'Mars_SMKN_4_Banjarmasin.mp3';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        
        // Show notification
        showModal("Unduhan Dimulai", `<p style="text-align: center; padding: 20px;">Lagu Mars SMKN 4 Banjarmasin sedang diunduh.</p>`);
      });
      
      // Playlist toggle
      playlistToggle.addEventListener('click', () => {
        playlistItems.classList.toggle('active');
        
        if (playlistItems.classList.contains('active')) {
          playlistToggle.innerHTML = '<i class="fas fa-chevron-up"></i> Sembunyikan';
        } else {
          playlistToggle.innerHTML = '<i class="fas fa-chevron-down"></i> Tampilkan';
        }
      });
      
      // Playlist item selection
      playlistItemElements.forEach(item => {
        item.addEventListener('click', () => {
          // Remove active class from all items
          playlistItemElements.forEach(i => i.classList.remove('active'));
          
          // Add active class to clicked item
          item.classList.add('active');
          
          // Change audio source
          const newSrc = item.dataset.src;
          audioPlayer.src = newSrc;
          
          // Update track info
          const title = item.querySelector('.playlist-item-title').textContent;
          const artist = item.querySelector('.playlist-item-artist').textContent;
          
          document.querySelector('.player-track-title').textContent = title;
          document.querySelector('.player-track-artist').textContent = artist;
          
          // Load and play the new track
          audioPlayer.load();
          audioPlayer.play();
          playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
          playPauseBtn.classList.add('playing');
        });
      });
      
      // Timeline functionality
      const timelineToggles = document.querySelectorAll('.timeline-toggle');
      
      timelineToggles.forEach(toggle => {
        toggle.addEventListener('click', () => {
          const targetId = toggle.dataset.target;
          const detailsElement = document.getElementById(targetId);
          
          detailsElement.classList.toggle('active');
          
          if (detailsElement.classList.contains('active')) {
            toggle.innerHTML = 'Sembunyikan <i class="fas fa-chevron-up"></i>';
          } else {
            toggle.innerHTML = 'Selengkapnya <i class="fas fa-chevron-down"></i>';
          }
        });
      });
    });
  </script>
</body>
</html>