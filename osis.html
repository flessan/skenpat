<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OSIS Showcase — Galeri Anggota (GDrive direct URLs)</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root{
      --bg: #0f1724;
      --card: #0b1220;
      --muted: #93a3b8;
      --text: #e6f0f6;
      --accent: #22c55e;
      --radius: 12px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#061021 0%, #071426 100%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    header{
      padding:20px 28px;
      display:flex;
      align-items:center;
      gap:20px;
      border-bottom:1px solid rgba(255,255,255,0.04);
      background: linear-gradient(90deg, rgba(255,255,255,0.02), transparent);
      position:sticky; top:0; z-index:60;
    }
    .brand { display:flex; gap:12px; align-items:center; }
    .logo{ width:44px; height:44px; border-radius:10px; display:inline-flex; align-items:center; justify-content:center; font-weight:800; background:linear-gradient(135deg,#16a34a,#0ea5a9); color:white; box-shadow: 0 8px 24px rgba(2,6,23,0.6); }
    h1{ font-size:18px; margin:0; letter-spacing:0.4px }
    header .right { margin-left:auto; display:flex; gap:10px; align-items:center; }

    /* Search / filter */
    .search {
      display:flex; align-items:center; gap:8px; background: rgba(255,255,255,0.02);
      padding:8px 10px; border-radius:999px; border:1px solid rgba(255,255,255,0.02);
    }
    .search input{
      background:transparent; border:0; outline:none; color:var(--text); width:220px;
    }
    .btn {
      background:var(--card); color:var(--text); padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); cursor:pointer;
    }
    .btn.primary { background:var(--accent); color:#04120b; font-weight:700; border: none; }

    main { padding:22px; max-width:1200px; margin:0 auto; }

    .grid {
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap:18px;
      margin-top:18px;
    }

    .member-card {
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border-radius:12px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,0.03);
      transition: transform .18s ease, box-shadow .18s ease;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      min-height: 320px;
    }
    .member-card:hover { transform: translateY(-6px); box-shadow: 0 18px 42px rgba(2,6,23,0.6); }
    .member-card img {
      width:100%; height:240px; object-fit:cover; display:block; background:#0b1220;
    }
    .member-info {
      padding:12px;
      display:flex; flex-direction:column; gap:6px; align-items:center; text-align:center;
    }
    .member-info h3 { margin:0; font-size:15px; color:var(--text); }
    .member-info p { margin:0; font-size:13px; color:var(--muted) }

    .card-actions { display:flex; gap:8px; margin-top:8px; }
    .card-actions a, .card-actions button { font-size:13px; padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); background:transparent; color:var(--text); text-decoration:none; cursor:pointer; display:inline-flex; gap:8px; align-items:center; }

    /* modal */
    #photoModal {
      position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background: rgba(1,3,6,0.75); z-index:200;
    }
    #photoModal.active { display:flex; }
    #photoModal .modal-inner { width: min(1100px, 96%); max-height: 92%; background:transparent; position:relative; display:flex; gap:12px; }
    #photoModal img { width:100%; height:auto; border-radius:10px; box-shadow: 0 30px 80px rgba(0,0,0,0.6); object-fit:contain; }
    #photoModal .meta { min-width:260px; max-width:320px; padding:12px; background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border-radius:10px; color:var(--muted); }
    #photoModal button.close {
      position:absolute; right:8px; top:8px; background:rgba(0,0,0,0.45); color:#fff; border:0; font-size:22px; width:44px; height:44px; border-radius:10px; cursor:pointer;
    }

    /* responsive tweaks */
    @media (max-width:880px){
      .member-card { min-height: 300px; }
      header { padding:12px 14px; }
      .search input{ width: 140px; }
    }
    @media (max-width:520px){
      .grid { grid-template-columns: repeat(2, 1fr); gap:10px; }
      .member-card img { height:160px; }
      #photoModal .modal-inner { flex-direction:column; }
      #photoModal .meta { max-width:100%; width:100%; }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <span class="logo">FG</span>
      <div>
        <h1>OSIS Showcase</h1>
        <div style="font-size:12px;color:var(--muted)">Galeri foto anggota — klik untuk lihat besar</div>
      </div>
    </div>

    <div class="right">
      <div class="search" title="Cari nama atau sekbid">
        <i class="fas fa-search" style="color:var(--muted)"></i>
        <input id="searchInput" placeholder="Cari nama, sekbid..." />
        <button id="clearSearch" class="btn" title="Bersihkan" style="display:none"><i class="fas fa-xmark"></i></button>
      </div>
      <button id="refreshBtn" class="btn" title="Refresh data"><i class="fas fa-sync-alt"></i></button>
    </div>
  </header>

  <main>
    <section>
      <div id="stats" style="display:flex;gap:12px;align-items:center;flex-wrap:wrap"></div>
      <div class="grid" id="grid" aria-live="polite"></div>
    </section>
  </main>

  <!-- modal photo -->
  <div id="photoModal" aria-hidden="true">
    <div class="modal-inner" role="dialog" aria-modal="true">
      <img id="modalImg" alt="Preview Foto">
      <div class="meta">
        <h3 id="metaName" style="color:var(--text); margin-top:0">Nama</h3>
        <p id="metaSekbid" style="margin:6px 0 12px">Sekbid</p>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <a id="openDrive" class="btn" target="_blank" rel="noopener" style="text-decoration:none"><i class="fas fa-external-link-alt"></i> Buka di Drive</a>
          <button id="downloadBtn" class="btn primary"><i class="fas fa-download"></i> Download</button>
        </div>
      </div>
      <button class="close" id="closeModal" aria-label="Tutup">&times;</button>
    </div>
  </div>

  <script>
    // fallback placeholder image (CDN)
    const PLACEHOLDER = "https://via.placeholder.com/800x520?text=No+Photo";

    function escapeHtml(s){
      if(!s) return "";
      return String(s).replace(/[&<>"']/g, ch => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[ch]));
    }

    // ---------- Foto direct URLs (drive.usercontent) ----------
    // I use full URLs that work as <img> sources.
    const fotoUrls = {
      "Muhammad Reno Helmawan": "https://drive.usercontent.google.com/download?id=1qqyR4UQyh1mectQRTsXPKDia63KqwtTK&export=view&authuser=0",
      "Corry Laura Beuty Pakpahan": "https://drive.usercontent.google.com/download?id=19VLZ2yoG0MUVnQkk1bqCHFGe61-sDhvx&export=view&authuser=0",
      "Amalia Rahmania": "https://drive.usercontent.google.com/download?id=1Q3gY0djwi9W32DrQZE-dwVdBS1qj8NfN&export=view&authuser=0",
      "Nur Almira Putri": "https://drive.usercontent.google.com/download?id=1BFPTyGjN3jWATdR2GaS&export=view&authuser=0",
      "Arya Tri Nugraha": "https://drive.usercontent.google.com/download?id=1hd11&export=view&authuser=0",
      "Muhammad Dede Riyadhi": "https://drive.usercontent.google.com/download?id=1ZWEfxog8cJ4Mht&export=view&authuser=0",
      "Farraz Ibnu Fadli": "https://drive.usercontent.google.com/download?id=1Ght2dIp5w8WqEjTtCRDAeuOVzz2azhf7&export=view&authuser=0",
      "Salsabila Azzahra": "https://drive.usercontent.google.com/download?id=1FvO0jxzp-pO9X5w2NmH8G6vuQm1PjX70&export=view&authuser=0",
      "Maskanah": "https://drive.usercontent.google.com/download?id=1CsNSHlUEbGBhJgiMem44zcDwqpZoOYqS&export=view&authuser=0",
      "Muhammad Naufal": "https://drive.usercontent.google.com/download?id=1M5vZoRDtuwduUXH35igj9dWOgcZWzQC6&export=view&authuser=0",
      "Muhammad Iqbal": "https://drive.usercontent.google.com/download?id=1E3jSeR8&export=view&authuser=0",
      "Akhmad Fitrianoor": "https://drive.usercontent.google.com/download?id=1AjUUwiveoc&export=view&authuser=0",
      "Adinda Azrelia H.": "https://drive.usercontent.google.com/download?id=12pUEMMe-Dkp1nt0kBTQaamTlq3dPMzFB&export=view&authuser=0",
      "Sarah Naila Humaira": "https://drive.usercontent.google.com/download?id=1FS5dcFeqJi8eSGp-cv4Mw4j0SKQp9c6z&export=view&authuser=0",
      "Kamila Jamil": "https://drive.usercontent.google.com/download?id=1D7Y&export=view&authuser=0",
      "Nur Rumaisya Adzkiya": "https://drive.usercontent.google.com/download?id=1TSkKJjrMJ0TlN&export=view&authuser=0",
      "Muhammad Rasya Azizi": "https://drive.usercontent.google.com/download?id=1QlPQbzijGF21-UhivYGKmL3PGvDbOSSJ&export=view&authuser=0",
      "Dara Puspita Rahayu": "https://drive.usercontent.google.com/download?id=1fe-vQQlAa576kXWcm&export=view&authuser=0",
      "Salsabila Salma": "https://drive.usercontent.google.com/download?id=10GvNgfDO848uAzRNQiArIiCLd4jQDJUw&export=view&authuser=0",
      "Erika Purnama Saputri": "https://drive.usercontent.google.com/download?id=1oWhBj8T6&export=view&authuser=0",
      "Nur Amaliah": "https://drive.usercontent.google.com/download?id=16FGPDv1dQQOX6XfFCZpn7OmoLvizNC8X&export=view&authuser=0",
      "Muhammad Rayhan": "https://drive.usercontent.google.com/download?id=1r2dc0SVDrW36Or5kJCfM6ZNE0tpH85TO&export=view&authuser=0",
      "Latifatul Azkiya": "https://drive.usercontent.google.com/download?id=1ppICl48QA5e-08NzfT6QHKE&export=view&authuser=0",
      "Humaira Faizatun Husna": "https://drive.usercontent.google.com/download?id=1U0ffaOenXyvZFnLNDKHU63mhkwmBq9si&export=view&authuser=0",
      "Julia Azzahra": "https://drive.usercontent.google.com/download?id=1ZvkP1W76B3bcJcT5LCw6LNppACuXlKdv&export=view&authuser=0",
      "Zahratussita": "https://drive.usercontent.google.com/download?id=1XugVGaccTc0q0BVEu7qlyAZILqi&export=view&authuser=0",
      "Maulida Rizki Ardiani": "https://drive.usercontent.google.com/download?id=1-425RR8U9Me9Lo9r66cK86lCb4lfDnvN&export=view&authuser=0",
      "Muhammad Syahrul": "https://drive.usercontent.google.com/download?id=1iMDOJdgjL7N-tLI4pXZWVes8N7H60yxz&export=view&authuser=0",
      "Gusti Cynthia Anggraini R.": "https://drive.usercontent.google.com/download?id=1dVYoPPVIN&export=view&authuser=0",
      "Ebira Hasanatina": "https://drive.usercontent.google.com/download?id=1WiCjcBMQNSlmVOymjOW7nTulnsYrWbM1&export=view&authuser=0",
      "Siti Maimunah Fadilla": "https://drive.usercontent.google.com/download?id=17r9r&export=view&authuser=0",
      "Helma Nazulla": "https://drive.usercontent.google.com/download?id=1Rxloa5uVG1zq3LhFqBkkfqxvhzNgL8kR&export=view&authuser=0",
      "Muhammad Iqbal 2": "https://drive.usercontent.google.com/download?id=1W16WYsZ1hWxxuIh1muXzQTz6cz8vzUa-&export=view&authuser=0",
      "Shireen Nur Aura Rizqy": "https://drive.usercontent.google.com/download?id=1RiGD5ivNSf8qNztqts1MheC7GGJUlJs9&export=view&authuser=0",
      "Muhammad Haffi Tasmin": "https://drive.usercontent.google.com/download?id=18XBqAbhOcMMaNUX6WQft7Pc7PzHJeIq-&export=view&authuser=0",
      "Muhammad Nazril Ilham": "https://drive.usercontent.google.com/download?id=11h29OGU2J0rU-XieXZEOL&export=view&authuser=0",
      "Rizkya Nur Aulia": "https://drive.usercontent.google.com/download?id=1XxrNanbGi4FAwm29eY5IMtKGPD3ZWMdW&export=view&authuser=0",
      "Yeni Agustine": "https://drive.usercontent.google.com/download?id=1rk0ynoj0QouqwkHq1G6ZiHieLUoUC7qR&export=view&authuser=0"
    };

    // ---------- Sekbid data ----------
    const sekbids = [
      { title: "Sekbid 1", icon: "fa-users", members: [
          { name: "Muhammad Reno Helmawan", role: "Ketua" },
          { name: "Corry Laura Beuty Pakpahan", role: "Wakil" },
          { name: "Amalia Rahmania", role: "Anggota" },
          { name: "Nur Almira Putri", role: "Anggota" }
        ]
      },
      { title: "Sekbid 2", icon: "fa-lightbulb", members: [
          { name: "Arya Tri Nugraha", role: "Ketua" },
          { name: "Muhammad Dede Riyadhi", role: "Anggota" }
        ]
      },
      { title: "Sekbid 3", icon: "fa-pen-nib", members: [
          { name: "Farraz Ibnu Fadli", role: "Ketua" },
          { name: "Salsabila Azzahra", role: "Anggota" }
        ]
      },
      { title: "Sekbid 4", icon: "fa-handshake", members: [
          { name: "Maskanah", role: "Ketua" },
          { name: "Muhammad Naufal", role: "Wakil" }
        ]
      },
      { title: "Sekbid 5", icon: "fa-graduation-cap", members: [
          { name: "Muhammad Iqbal", role: "Ketua" },
          { name: "Akhmad Fitrianoor", role: "Anggota" }
        ]
      },
      { title: "Sekbid 6", icon: "fa-star", members: [
          { name: "Adinda Azrelia H.", role: "Ketua" },
          { name: "Sarah Naila Humaira", role: "Anggota" }
        ]
      },
      { title: "Sekbid 7", icon: "fa-heart", members: [
          { name: "Kamila Jamil", role: "Ketua" },
          { name: "Nur Rumaisya Adzkiya", role: "Anggota" }
        ]
      },
      { title: "Sekbid 8", icon: "fa-music", members: [
          { name: "Muhammad Rasya Azizi", role: "Ketua" },
          { name: "Dara Puspita Rahayu", role: "Anggota" }
        ]
      },
      { title: "Sekbid 9", icon: "fa-globe", members: [
          { name: "Salsabila Salma", role: "Ketua" },
          { name: "Erika Purnama Saputri", role: "Anggota" }
        ]
      },
      { title: "Sekbid 10", icon: "fa-lightbulb", members: [
          { name: "Nur Amaliah", role: "Ketua" },
          { name: "Muhammad Rayhan", role: "Anggota" }
        ]
      },
      { title: "Sekbid 11", icon: "fa-users", members: [
          { name: "Latifatul Azkiya", role: "Ketua" },
          { name: "Humaira Faizatun Husna", role: "Anggota" }
        ]
      },
      { title: "Sekbid 12", icon: "fa-leaf", members: [
          { name: "Julia Azzahra", role: "Ketua" },
          { name: "Zahratussita", role: "Anggota" }
        ]
      },
      { title: "Sekbid 13", icon: "fa-thumbs-up", members: [
          { name: "Maulida Rizki Ardiani", role: "Ketua" },
          { name: "Muhammad Syahrul", role: "Anggota" }
        ]
      },
      { title: "Sekbid 14", icon: "fa-palette", members: [
          { name: "Gusti Cynthia Anggraini R.", role: "Ketua" },
          { name: "Ebira Hasanatina", role: "Anggota" }
        ]
      },
      { title: "Sekbid 15", icon: "fa-handshake", members: [
          { name: "Siti Maimunah Fadilla", role: "Ketua" },
          { name: "Helma Nazulla", role: "Anggota" }
        ]
      },
      { title: "Sekbid 16", icon: "fa-graduation-cap", members: [
          { name: "Muhammad Iqbal 2", role: "Ketua" },
          { name: "Shireen Nur Aura Rizqy", role: "Anggota" }
        ]
      },
      { title: "Sekbid 17", icon: "fa-flag", members: [
          { name: "Muhammad Haffi Tasmin", role: "Ketua" },
          { name: "Muhammad Nazril Ilham", role: "Anggota" }
        ]
      },
      { title: "Sekbid 18", icon: "fa-rocket", members: [
          { name: "Rizkya Nur Aulia", role: "Ketua" },
          { name: "Yeni Agustine", role: "Anggota" }
        ]
      }
    ];

    // ---------- render ----------
    const grid = document.getElementById("grid");
    const stats = document.getElementById("stats");

    function buildCard(member, sekbidTitle){
      const imgUrl = fotoUrls[member.name] || PLACEHOLDER;
      // extract id from url for drive view/download if possible
      // try to find id parameter in the drive.usercontent url:
      let id = null;
      try {
        const u = new URL(imgUrl);
        id = u.searchParams.get('id') || null;
      } catch(e){}
      const driveView = id ? `https://drive.google.com/file/d/${encodeURIComponent(id)}/view` : "";

      const card = document.createElement('article');
      card.className = "member-card";
      card.tabIndex = 0;

      card.innerHTML = `
        <img loading="lazy" decoding="async" src="${imgUrl}" alt="${escapeHtml(member.name)}"
             onerror="this.onerror=null;this.src='${PLACEHOLDER}';">
        <div class="member-info">
          <h3>${escapeHtml(member.name)}</h3>
          <p>${escapeHtml(member.role)} — ${escapeHtml(sekbidTitle)}</p>
          <div class="card-actions" style="margin-top:10px">
            <button class="openModal btn"><i class="fas fa-expand"></i> Preview</button>
            ${driveView ? `<a class="btn" href="${driveView}" target="_blank" rel="noopener"><i class="fas fa-external-link-alt"></i> Open Drive</a>` : ""}
          </div>
        </div>
      `;

      const openBtn = card.querySelector('.openModal');
      if(openBtn){
        openBtn.addEventListener('click', (e)=>{
          e.stopPropagation();
          openModal(imgUrl, member.name, `${member.role} — ${sekbidTitle}`, id);
        });
      }

      card.addEventListener('click', ()=> openModal(imgUrl, member.name, `${member.role} — ${sekbidTitle}`, id));
      card.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') openModal(imgUrl, member.name, `${member.role} — ${sekbidTitle}`, id); });

      return card;
    }

    function renderAll(){
      grid.innerHTML = "";
      let total = 0;
      sekbids.forEach(section => {
        section.members.forEach(member => {
          const card = buildCard(member, section.title);
          grid.appendChild(card);
          total++;
        });
      });

      // stats
      stats.innerHTML = `
        <div style="padding:8px 12px; background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border-radius:10px; border:1px solid rgba(255,255,255,0.03)">
          <strong>Total Anggota:</strong> ${total}
        </div>
        <div style="padding:8px 12px; background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border-radius:10px; border:1px solid rgba(255,255,255,0.03)">
          <strong>Sekbid Terdaftar:</strong> ${sekbids.length}
        </div>
      `;
    }

    // ---------- modal ----------
    const photoModal = document.getElementById('photoModal');
    const modalImg = document.getElementById('modalImg');
    const metaName = document.getElementById('metaName');
    const metaSekbid = document.getElementById('metaSekbid');
    const openDriveBtn = document.getElementById('openDrive');
    const downloadBtn = document.getElementById('downloadBtn');
    const closeModal = document.getElementById('closeModal');

    function openModal(imgUrl, name, sekbidText, id){
      modalImg.src = imgUrl || PLACEHOLDER;
      metaName.textContent = name || "—";
      metaSekbid.textContent = sekbidText || "—";
      if(id){
        openDriveBtn.style.display = "";
        const driveView = `https://drive.google.com/file/d/${encodeURIComponent(id)}/view`;
        const driveDownload = `https://drive.usercontent.google.com/download?id=${encodeURIComponent(id)}&export=view&authuser=0`;
        openDriveBtn.href = driveView;
        downloadBtn.onclick = ()=> { window.open(driveDownload, "_blank"); };
      } else {
        openDriveBtn.style.display = "none";
        downloadBtn.onclick = null;
      }
      photoModal.classList.add('active');
      photoModal.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
    }

    function closeModalFn(){
      photoModal.classList.remove('active');
      photoModal.setAttribute('aria-hidden','true');
      modalImg.src = "";
      document.body.style.overflow = '';
    }

    closeModal.addEventListener('click', closeModalFn);
    photoModal.addEventListener('click', (e)=> { if(e.target === photoModal) closeModalFn(); });
    document.addEventListener('keydown', (e)=> { if(e.key === 'Escape' && photoModal.classList.contains('active')) closeModalFn(); });

    // ---------- search / filter ----------
    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');
    const refreshBtn = document.getElementById('refreshBtn');

    function filterGrid(q){
      q = (q||"").trim().toLowerCase();
      const cards = Array.from(document.querySelectorAll('.member-card'));
      if(!q){ cards.forEach(c=> c.style.display = "flex"); clearSearch.style.display = "none"; return; }
      clearSearch.style.display = "";
      cards.forEach(card=>{
        const name = card.querySelector('.member-info h3').textContent.toLowerCase();
        const meta = card.querySelector('.member-info p').textContent.toLowerCase();
        const matches = name.includes(q) || meta.includes(q);
        card.style.display = matches ? "flex" : "none";
      });
    }

    searchInput.addEventListener('input', (e)=> filterGrid(e.target.value));
    clearSearch.addEventListener('click', ()=> { searchInput.value=''; filterGrid(''); searchInput.focus(); });

    refreshBtn.addEventListener('click', ()=> {
      renderAll();
      filterGrid(searchInput.value);
    });

    // ---------- init ----------
    renderAll();
    // expose for quick debug in console
    window._OSIS = { sekbids, fotoUrls, renderAll };
  </script>
</body>
</html>