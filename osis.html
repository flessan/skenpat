<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Struktur Organisasi OSIS — SMK Negeri 4 Banjarmasin</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #0066cc;
      --primary-light: #3388dd;
      --primary-dark: #004499;
      --secondary: #f59e0b;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --info: #06b6d4;
      
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-400: #9ca3af;
      --gray-500: #6b7280;
      --gray-600: #4b5563;
      --gray-700: #374151;
      --gray-800: #1f2937;
      --gray-900: #111827;
      
      --bg: var(--gray-50);
      --surface: white;
      --text: var(--gray-900);
      --text-muted: var(--gray-600);
      --border: var(--gray-200);
      --border-light: var(--gray-100);
      
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
      --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
      
      --radius: 0.75rem;
      --radius-sm: 0.5rem;
      --radius-lg: 1rem;
      
      --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    [data-theme="dark"] {
      --bg: var(--gray-900);
      --surface: var(--gray-800);
      --text: var(--gray-100);
      --text-muted: var(--gray-400);
      --border: var(--gray-700);
      --border-light: var(--gray-800);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
    }

    /* Header */
    .header {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2rem;
      margin-bottom: 2rem;
      text-align: center;
    }

    .header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }

    .header .subtitle {
      color: var(--text-muted);
      font-size: 1.1rem;
      margin-bottom: 1.5rem;
    }

    .header-actions {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
      font-size: 0.875rem;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }

    .btn-outline {
      background: transparent;
      color: var(--primary);
      border: 1px solid var(--primary);
    }

    .btn-outline:hover {
      background: var(--primary);
      color: white;
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-muted);
      border: 1px solid var(--border);
    }

    .btn-ghost:hover {
      background: var(--gray-100);
      color: var(--text);
    }

    [data-theme="dark"] .btn-ghost:hover {
      background: var(--gray-700);
    }

    .btn-sm {
      padding: 0.5rem 1rem;
      font-size: 0.75rem;
    }

    /* Search Section */
    .search-section {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.5rem;
      margin-bottom: 2rem;
    }

    .search-container {
      position: relative;
      max-width: 400px;
      margin: 0 auto;
    }

    .search-input {
      width: 100%;
      padding: 1rem 1rem 1rem 3rem;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 1rem;
      background: var(--bg);
      transition: var(--transition);
    }

    .search-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgb(0 102 204 / 0.1);
    }

    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
      pointer-events: none;
    }

    .search-clear {
      position: absolute;
      right: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      padding: 0.5rem;
      border-radius: var(--radius-sm);
      transition: var(--transition);
    }

    .search-clear:hover {
      background: var(--gray-100);
      color: var(--text);
    }

    [data-theme="dark"] .search-clear:hover {
      background: var(--gray-700);
    }

    .search-stats {
      text-align: center;
      margin-top: 1rem;
      color: var(--text-muted);
      font-size: 0.875rem;
    }

    /* Leadership Structure */
    .leadership {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2rem;
      margin-bottom: 2rem;
    }

    .leadership h2 {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 1.5rem;
    }

    .org-chart {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
    }

    .org-level {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .leader-card {
      background: var(--bg);
      border-radius: var(--radius-sm);
      padding: 1.5rem;
      text-align: center;
      min-width: 200px;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
      border: 1px solid var(--border-light);
    }

    .leader-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .leader-role {
      color: var(--text-muted);
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
    }

    .leader-name {
      font-weight: 600;
      font-size: 1rem;
    }

    /* Departments Grid */
    .departments {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .department-card {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      transition: var(--transition);
    }

    .department-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .department-header {
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: white;
      padding: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .department-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.125rem;
      font-weight: 600;
    }

    .department-actions {
      display: flex;
      gap: 0.5rem;
    }

    .action-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      padding: 0.5rem;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: var(--transition);
    }

    .action-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .department-content {
      padding: 1.5rem;
    }

    .member-list {
      list-style: none;
    }

    .member-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border-light);
    }

    .member-item:last-child {
      border-bottom: none;
    }

    .member-info {
      flex: 1;
    }

    .member-name {
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    .member-role {
      color: var(--text-muted);
      font-size: 0.875rem;
    }

    .member-actions {
      display: flex;
      gap: 0.5rem;
    }

    .photo-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 0.25rem 0.75rem;
      border-radius: var(--radius-sm);
      font-size: 0.75rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .photo-btn:hover {
      background: var(--primary-dark);
    }

    /* Stats */
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.5rem;
      text-align: center;
    }

    .stat-number {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
    }

    .stat-label {
      color: var(--text-muted);
      font-size: 0.875rem;
      margin-top: 0.5rem;
    }

    /* Footer */
    .footer {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2rem;
      text-align: center;
      color: var(--text-muted);
      margin-top: 2rem;
    }

    /* Utilities */
    .hidden {
      display: none !important;
    }

    .highlight {
      background: rgba(255, 235, 59, 0.3);
      padding: 0.125rem 0.25rem;
      border-radius: 0.25rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 0.5rem;
      }
      
      .header h1 {
        font-size: 2rem;
      }
      
      .header .subtitle {
        font-size: 1rem;
      }
      
      .departments {
        grid-template-columns: 1fr;
      }
      
      .org-level {
        flex-direction: column;
        align-items: center;
      }
      
      .leader-card {
        min-width: 250px;
      }
    }

    @media (max-width: 480px) {
      .header-actions {
        flex-direction: column;
        width: 100%;
      }
      
      .btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>Struktur Organisasi OSIS</h1>
      <p class="subtitle">SMK Negeri 4 Banjarmasin · Periode 2024/2025</p>
      <div class="header-actions">
        <button class="btn btn-primary" id="themeToggle">
          <i class="fas fa-moon"></i>
          <span>Mode Gelap</span>
        </button>
        <button class="btn btn-outline" id="expandAll">
          <i class="fas fa-expand-alt"></i>
          <span>Buka Semua</span>
        </button>
        <button class="btn btn-outline" id="collapseAll">
          <i class="fas fa-compress-alt"></i>
          <span>Tutup Semua</span>
        </button>
      </div>
    </header>

    <!-- Search -->
    <section class="search-section">
      <div class="search-container">
        <div class="search-icon">
          <i class="fas fa-search"></i>
        </div>
        <input 
          type="search" 
          class="search-input" 
          id="searchInput" 
          placeholder="Cari nama, jabatan, atau seksi..."
          autocomplete="off"
        >
        <button class="search-clear hidden" id="searchClear" aria-label="Bersihkan">
        </button>
      </div>
      <div class="search-stats" id="searchStats">
        Total: <strong id="totalDepartments">0</strong> seksi · <strong id="totalMembers">0</strong> anggota
      </div>
    </section>

    <!-- Stats -->
    <div class="stats">
      <div class="stat-card">
        <div class="stat-number" id="statDepartments">0</div>
        <div class="stat-label">Seksi Bidang</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statMembers">0</div>
        <div class="stat-label">Total Anggota</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">7</div>
        <div class="stat-label">Pengurus Inti</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">2024/25</div>
        <div class="stat-label">Periode</div>
      </div>
    </div>

    <!-- Leadership Structure -->
    <section class="leadership">
      <h2>
        <i class="fas fa-sitemap"></i>
        Struktur Kepengurusan
      </h2>
      <div class="org-chart">
        <div class="org-level">
          <div class="leader-card">
            <div class="leader-role">Pembina OSIS</div>
            <div class="leader-name">Ade Fitriyadi S.Pd.</div>
          </div>
        </div>
        
        <div class="org-level">
          <div class="leader-card">
            <div class="leader-role">Ketua OSIS</div>
            <div class="leader-name">Muhammad Reno Helmawan</div>
          </div>
          <div class="leader-card">
            <div class="leader-role">Wakil Ketua</div>
            <div class="leader-name">Corry Laura Beuty Pakpahan</div>
          </div>
        </div>
        
        <div class="org-level">
          <div class="leader-card">
            <div class="leader-role">Sekretaris 1</div>
            <div class="leader-name">Amalia Rahmania</div>
          </div>
          <div class="leader-card">
            <div class="leader-role">Sekretaris 2</div>
            <div class="leader-name">Nur Almira Putri</div>
          </div>
          <div class="leader-card">
            <div class="leader-role">Bendahara 1</div>
            <div class="leader-name">Arya Tri Nugraha</div>
          </div>
          <div class="leader-card">
            <div class="leader-role">Bendahara 2</div>
            <div class="leader-name">Muhammad Dede Riyadhi</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Departments -->
    <div class="departments" id="departmentsGrid">
      <!-- Departments will be rendered here by JavaScript -->
    </div>

    <!-- Footer -->
    <footer class="footer">
      <p>© 2025 Organisasi Siswa Intra Sekolah | SMK Negeri 4 Banjarmasin</p>
      <p style="margin-top: 0.5rem; font-size: 0.75rem;">
        Sistem informasi struktur organisasi OSIS digital
      </p>
    </footer>
  </div>

  <script>
    // Data structure
    const departmentsData = [
      {
        id: 'wirausaha',
        title: 'Sekbid Wirausaha',
        icon: 'fa-store',
        members: [
          { name: 'Farraz Ibnu Fadli', role: 'Ketua Sekbid' },
          { name: 'Salsabila Azzahra', role: 'Anggota' },
          { name: 'Maskanah', role: 'Anggota' },
          { name: 'Muhammad Naufal', role: 'Anggota' }
        ]
      },
      {
        id: 'humas',
        title: 'Sekbid Humas',
        icon: 'fa-handshake',
        members: [
          { name: 'Muhammad Iqbal', role: 'Ketua Sekbid' },
          { name: 'Akhmad Fitrianoor', role: 'Anggota' },
          { name: 'Adinda Azrelia H.', role: 'Anggota' },
          { name: 'Sarah Naila Humaira', role: 'Anggota' },
          { name: 'Kamila Jamil', role: 'Anggota' },
          { name: 'Nur Rumaisya Adzkiya', role: 'Anggota' }
        ]
      },
      {
        id: 'lingkungan',
        title: 'Sekbid Lingkungan Hidup',
        icon: 'fa-leaf',
        members: [
          { name: 'Muhammad Rasya Azizi', role: 'Ketua Sekbid' },
          { name: 'Dara Puspita Rahayu', role: 'Anggota' },
          { name: 'Salsabila Salma', role: 'Anggota' },
          { name: 'Erika Purnama Saputri', role: 'Anggota' },
          { name: 'Nur Amaliah', role: 'Anggota' }
        ]
      },
      {
        id: 'olahraga',
        title: 'Sekbid Olahraga',
        icon: 'fa-running',
        members: [
          { name: 'Muhammad Rayhan', role: 'Ketua Sekbid' },
          { name: 'Latifatul Azkiya', role: 'Anggota' }
        ]
      },
      {
        id: 'keagamaan',
        title: 'Sekbid Keagamaan',
        icon: 'fa-pray',
        members: [
          { name: 'Humaira Faizatun Husna', role: 'Ketua Sekbid' },
          { name: 'Julia Azzahra', role: 'Anggota' },
          { name: 'Zahratussita', role: 'Anggota' },
          { name: 'Maulida Rizki Ardiani', role: 'Anggota' },
          { name: 'Muhammad Syahrul', role: 'Anggota' }
        ]
      },
      {
        id: 'belanegara',
        title: 'Sekbid Bela Negara',
        icon: 'fa-shield-alt',
        members: [
          { name: 'Gusti Cynthia Anggraini Rinanda', role: 'Ketua Sekbid' },
          { name: 'Ebira Hasanatina', role: 'Anggota' },
          { name: 'Siti Maimunah Fadilla', role: 'Anggota' },
          { name: 'Helma Nazulla', role: 'Anggota' },
          { name: 'Muhammad Iqbal', role: 'Anggota' }
        ]
      },
      {
        id: 'kepemimpinan',
        title: 'Sekbid Kepemimpinan',
        icon: 'fa-crown',
        members: [
          { name: 'Shireen Nur Aura Rizqy', role: 'Ketua Sekbid' },
          { name: 'Muhammad Farhan R.', role: 'Anggota' },
          { name: 'Muhammad Haffi Tasmin', role: 'Anggota' },
          { name: 'Muhammad Nazril Ilham', role: 'Anggota' },
          { name: 'Rizkya Nur Aulia', role: 'Anggota' },
          { name: 'Yeni Agustine', role: 'Anggota' }
        ]
      }
    ];

    // Photo URLs (placeholder - replace with actual working URLs)
    const photoUrls = {
      "Muhammad Reno Helmawan": "https://drive.usercontent.google.com/download?id=1qqyR4UQyh1mectQRTsXPKDia63KqwtTK&export=view&authuser=0",
      "Corry Laura Beuty Pakpahan": "https://drive.usercontent.google.com/download?id=19VLZ2yoG0MUVnQkk1bqCHFGe61-sDhvx&export=view&authuser=0",
      "Amalia Rahmania": "https://drive.usercontent.google.com/download?id=1Q3gY0djwi9W32DrQZE-dwVdBS1qj8NfN&export=view&authuser=0",
      "Nur Almira Putri": "https://drive.usercontent.google.com/download?id=1BFPTyGjN3jWATdR2GaS&export=view&authuser=0",
      "Arya Tri Nugraha": "https://drive.usercontent.google.com/download?id=1hd11&export=view&authuser=0",
      "Muhammad Dede Riyadhi": "https://drive.usercontent.google.com/download?id=1ZWEfxog8cJ4Mht&export=view&authuser=0",
      "Farraz Ibnu Fadli": "https://drive.usercontent.google.com/download?id=1Ght2dIp5w8WqEjTtCRDAeuOVzz2azhf7&export=view&authuser=0",
      "Salsabila Azzahra": "https://drive.usercontent.google.com/download?id=1FvO0jxzp-pO9X5w2NmH8G6vuQm1PjX70&export=view&authuser=0",
      "Maskanah": "https://drive.usercontent.google.com/download?id=1CsNSHlUEbGBhJgiMem44zcDwqpZoOYqS&export=view&authuser=0",
      "Muhammad Naufal": "https://drive.usercontent.google.com/download?id=1M5vZoRDtuwduUXH35igj9dWOgcZWzQC6&export=view&authuser=0",
      "Muhammad Iqbal": "https://drive.usercontent.google.com/download?id=1E3jSeR8&export=view&authuser=0",
      "Akhmad Fitrianoor": "https://drive.usercontent.google.com/download?id=1AjUUwiveoc&export=view&authuser=0",
      "Adinda Azrelia H.": "https://drive.usercontent.google.com/download?id=12pUEMMe-Dkp1nt0kBTQaamTlq3dPMzFB&export=view&authuser=0",
      "Sarah Naila Humaira": "https://drive.usercontent.google.com/download?id=1FS5dcFeqJi8eSGp-cv4Mw4j0SKQp9c6z&export=view&authuser=0",
      "Kamila Jamil": "https://drive.usercontent.google.com/download?id=1D7Y&export=view&authuser=0",
      "Nur Rumaisya Adzkiya": "https://drive.usercontent.google.com/download?id=1TSkKJjrMJ0TlN&export=view&authuser=0",
      "Muhammad Rasya Azizi": "https://drive.usercontent.google.com/download?id=1QlPQbzijGF21-UhivYGKmL3PGvDbOSSJ&export=view&authuser=0",
      "Dara Puspita Rahayu": "https://drive.usercontent.google.com/download?id=1fe-vQQlAa576kXWcm&export=view&authuser=0",
      "Salsabila Salma": "https://drive.usercontent.google.com/download?id=10GvNgfDO848uAzRNQiArIiCLd4jQDJUw&export=view&authuser=0",
      "Erika Purnama Saputri": "https://drive.usercontent.google.com/download?id=1oWhBj8T6&export=view&authuser=0",
      "Nur Amaliah": "https://drive.usercontent.google.com/download?id=16FGPDv1dQQOX6XfFCZpn7OmoLvizNC8X&export=view&authuser=0",
      "Muhammad Rayhan": "https://drive.usercontent.google.com/download?id=1r2dc0SVDrW36Or5kJCfM6ZNE0tpH85TO&export=view&authuser=0",
      "Latifatul Azkiya": "https://drive.usercontent.google.com/download?id=1ppICl48QA5e-08NzfT6QHKE&export=view&authuser=0",
      "Humaira Faizatun Husna": "https://drive.usercontent.google.com/download?id=1U0ffaOenXyvZFnLNDKHU63mhkwmBq9si&export=view&authuser=0",
      "Julia Azzahra": "https://drive.usercontent.google.com/download?id=1ZvkP1W76B3bcJcT5LCw6LNppACuXlKdv&export=view&authuser=0",
      "Zahratussita": "https://drive.usercontent.google.com/download?id=1XugVGaccTc0q0BVEu7qlyAZILqi&export=view&authuser=0",
      "Maulida Rizki Ardiani": "https://drive.usercontent.google.com/download?id=1-425RR8U9Me9Lo9r66cK86lCb4lfDnvN&export=view&authuser=0",
      "Muhammad Syahrul": "https://drive.usercontent.google.com/download?id=1iMDOJdgjL7N-tLI4pXZWVes8N7H60yxz&export=view&authuser=0",
      "Gusti Cynthia Anggraini R.": "https://drive.usercontent.google.com/download?id=1dVYoPPVIN&export=view&authuser=0",
      "Ebira Hasanatina": "https://drive.usercontent.google.com/download?id=1WiCjcBMQNSlmVOymjOW7nTulnsYrWbM1&export=view&authuser=0",
      "Siti Maimunah Fadilla": "https://drive.usercontent.google.com/download?id=17r9r&export=view&authuser=0",
      "Helma Nazulla": "https://drive.usercontent.google.com/download?id=1Rxloa5uVG1zq3LhFqBkkfqxvhzNgL8kR&export=view&authuser=0",
      "Muhammad Iqbal 2": "https://drive.usercontent.google.com/download?id=1W16WYsZ1hWxxuIh1muXzQTz6cz8vzUa-&export=view&authuser=0",
      "Shireen Nur Aura Rizqy": "https://drive.usercontent.google.com/download?id=1RiGD5ivNSf8qNztqts1MheC7GGJUlJs9&export=view&authuser=0",
      "Muhammad Haffi Tasmin": "https://drive.usercontent.google.com/download?id=18XBqAbhOcMMaNUX6WQft7Pc7PzHJeIq-&export=view&authuser=0",
      "Muhammad Nazril Ilham": "https://drive.usercontent.google.com/download?id=11h29OGU2J0rU-XieXZEOL&export=view&authuser=0",
      "Rizkya Nur Aulia": "https://drive.usercontent.google.com/download?id=1XxrNanbGi4FAwm29eY5IMtKGPD3ZWMdW&export=view&authuser=0",
      "Yeni Agustine": "https://drive.usercontent.google.com/download?id=1rk0ynoj0QouqwkHq1G6ZiHieLUoUC7qR&export=view&authuser=0"
    };

    // State
    let filteredDepartments = [...departmentsData];
    let isExpanded = true;

    // DOM elements
    const searchInput = document.getElementById('searchInput');
    const searchClear = document.getElementById('searchClear');
    const searchStats = document.getElementById('searchStats');
    const departmentsGrid = document.getElementById('departmentsGrid');
    const themeToggle = document.getElementById('themeToggle');
    const expandAll = document.getElementById('expandAll');
    const collapseAll = document.getElementById('collapseAll');

    // Utility functions
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function normalizeText(text) {
      return text.toLowerCase()
        .normalize('NFD')
        .replace(/[\u0300-\u036f]/g, '');
    }

    function highlightText(text, query) {
      if (!query) return escapeHtml(text);
      
      const normalizedText = normalizeText(text);
      const normalizedQuery = normalizeText(query);
      
      if (!normalizedText.includes(normalizedQuery)) {
        return escapeHtml(text);
      }
      
      const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
      return escapeHtml(text).replace(regex, '<span class="highlight">$1</span>');
    }

    // Search functionality
    function performSearch(query) {
      const normalizedQuery = normalizeText(query.trim());
      
      if (!normalizedQuery) {
        filteredDepartments = [...departmentsData];
        renderDepartments();
        updateStats();
        return;
      }

      filteredDepartments = departmentsData.filter(dept => {
        const titleMatch = normalizeText(dept.title).includes(normalizedQuery);
        const memberMatch = dept.members.some(member => 
          normalizeText(member.name).includes(normalizedQuery) ||
          normalizeText(member.role).includes(normalizedQuery)
        );
        return titleMatch || memberMatch;
      });

      renderDepartments(query);
      updateSearchStats(query);
    }

    function updateStats() {
      const totalDepts = departmentsData.length;
      const totalMembers = departmentsData.reduce((sum, dept) => sum + dept.members.length, 0);
      
      document.getElementById('totalDepartments').textContent = totalDepts;
      document.getElementById('totalMembers').textContent = totalMembers;
      document.getElementById('statDepartments').textContent = totalDepts;
      document.getElementById('statMembers').textContent = totalMembers;
      
      searchStats.innerHTML = `Total: <strong>${totalDepts}</strong> seksi · <strong>${totalMembers}</strong> anggota`;
    }

    function updateSearchStats(query) {
      const visibleDepts = filteredDepartments.length;
      const visibleMembers = filteredDepartments.reduce((sum, dept) => sum + dept.members.length, 0);
      
      searchStats.innerHTML = `Ditemukan: <strong>${visibleMembers}</strong> anggota di <strong>${visibleDepts}</strong> seksi`;
    }

    // Render functions
    function renderDepartments(query = '') {
      departmentsGrid.innerHTML = '';
      
      filteredDepartments.forEach(dept => {
        const card = document.createElement('div');
        card.className = 'department-card';
        card.dataset.id = dept.id;
        
        card.innerHTML = `
          <div class="department-header">
            <div class="department-title">
              <i class="fas ${dept.icon}"></i>
              <span>${highlightText(dept.title, query)}</span>
            </div>
            <div class="department-actions">
              <button class="action-btn copy-btn" title="Salin daftar anggota" data-dept="${dept.id}">
                <i class="fas fa-copy"></i>
              </button>
              <button class="action-btn toggle-btn" title="Tutup/Buka" data-dept="${dept.id}">
                <i class="fas fa-chevron-up"></i>
              </button>
            </div>
          </div>
          <div class="department-content">
            <ul class="member-list">
              ${dept.members.map(member => `
                <li class="member-item">
                  <div class="member-info">
                    <div class="member-name">${highlightText(member.name, query)}</div>
                    <div class="member-role">${highlightText(member.role, query)}</div>
                  </div>
                  <div class="member-actions">
                    ${photoUrls[member.name] ? `
                      <a class="photo-btn" href="${photoUrls[member.name]}" target="_blank" rel="noopener">   <i class="fas fa-image"></i>   Foto</a>
                    ` : ''}
                  </div>
                </li>
              `).join('')}
            </ul>
          </div>
        `;
        
        departmentsGrid.appendChild(card);
      });
      
      // Set initial state
      if (!isExpanded) {
        collapseAllDepartments();
      }
    }

    // Department actions
    function toggleDepartment(deptId) {
      const card = document.querySelector(`[data-id="${deptId}"]`);
      const content = card.querySelector('.department-content');
      const toggleBtn = card.querySelector('.toggle-btn i');
      
      if (content.style.display === 'none') {
        content.style.display = 'block';
        toggleBtn.className = 'fas fa-chevron-up';
      } else {
        content.style.display = 'none';
        toggleBtn.className = 'fas fa-chevron-down';
      }
    }

    function copyDepartmentMembers(deptId) {
      const dept = departmentsData.find(d => d.id === deptId);
      if (!dept) return;
      
      const membersList = dept.members.map(member => member.name).join('\n');
      
      if (navigator.clipboard) {
        navigator.clipboard.writeText(membersList).then(() => {
          showNotification('Daftar anggota berhasil disalin!', 'success');
        }).catch(() => {
          fallbackCopyToClipboard(membersList);
        });
      } else {
        fallbackCopyToClipboard(membersList);
      }
    }

    function fallbackCopyToClipboard(text) {
      const textArea = document.createElement('textarea');
      textArea.value = text;
      textArea.style.position = 'fixed';
      textArea.style.left = '-999999px';
      textArea.style.top = '-999999px';
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      
      try {
        document.execCommand('copy');
        showNotification('Daftar anggota berhasil disalin!', 'success');
      } catch (err) {
        showNotification('Gagal menyalin. Coba lagi.', 'error');
      }
      
      document.body.removeChild(textArea);
    }

    function expandAllDepartments() {
      const contents = document.querySelectorAll('.department-content');
      const toggleBtns = document.querySelectorAll('.toggle-btn i');
      
      contents.forEach(content => {
        content.style.display = 'block';
      });
      
      toggleBtns.forEach(btn => {
        btn.className = 'fas fa-chevron-up';
      });
      
      isExpanded = true;
    }

    function collapseAllDepartments() {
      const contents = document.querySelectorAll('.department-content');
      const toggleBtns = document.querySelectorAll('.toggle-btn i');
      
      contents.forEach(content => {
        content.style.display = 'none';
      });
      
      toggleBtns.forEach(btn => {
        btn.className = 'fas fa-chevron-down';
      });
      
      isExpanded = false;
    }

    // Photo viewing
    function viewPhoto(url, name) {
      // Create modal overlay
      const overlay = document.createElement('div');
      overlay.className = 'photo-overlay';
      overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        cursor: pointer;
        padding: 2rem;
      `;
      
      const photoContainer = document.createElement('div');
      photoContainer.style.cssText = `
        max-width: 90vw;
        max-height: 90vh;
        text-align: center;
      `;
      
      const img = document.createElement('img');
      img.src = url;
      img.alt = `Foto ${name}`;
      img.style.cssText = `
        max-width: 100%;
        max-height: 80vh;
        border-radius: var(--radius);
        box-shadow: var(--shadow-lg);
      `;
      
      const caption = document.createElement('p');
      caption.textContent = name;
      caption.style.cssText = `
        color: white;
        margin-top: 1rem;
        font-size: 1.25rem;
        font-weight: 500;
      `;
      
      const closeBtn = document.createElement('button');
      closeBtn.innerHTML = '<i class="fas fa-times"></i>';
      closeBtn.style.cssText = `
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        padding: 1rem;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.25rem;
        width: 3rem;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
      `;
      
      photoContainer.appendChild(img);
      photoContainer.appendChild(caption);
      overlay.appendChild(photoContainer);
      overlay.appendChild(closeBtn);
      
      // Close handlers
      const closeModal = () => document.body.removeChild(overlay);
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) closeModal();
      });
      closeBtn.addEventListener('click', closeModal);
      
      // ESC key handler
      const handleEsc = (e) => {
        if (e.key === 'Escape') {
          closeModal();
          document.removeEventListener('keydown', handleEsc);
        }
      };
      document.addEventListener('keydown', handleEsc);
      
      document.body.appendChild(overlay);
    }

    // Notification system
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 2rem;
        right: 2rem;
        background: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--danger)' : 'var(--info)'};
        color: white;
        padding: 1rem 1.5rem;
        border-radius: var(--radius-sm);
        box-shadow: var(--shadow-lg);
        z-index: 1000;
        font-weight: 500;
        transform: translateX(100%);
        transition: var(--transition);
      `;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      // Animate in
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 10);
      
      // Remove after delay
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          if (document.body.contains(notification)) {
            document.body.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }

    // Theme management
    function toggleTheme() {
      const isDark = document.documentElement.hasAttribute('data-theme');
      const themeIcon = themeToggle.querySelector('i');
      const themeText = themeToggle.querySelector('span');
      
      if (isDark) {
        document.documentElement.removeAttribute('data-theme');
        themeIcon.className = 'fas fa-moon';
        themeText.textContent = 'Mode Gelap';
        localStorage.removeItem('osis-theme');
      } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeIcon.className = 'fas fa-sun';
        themeText.textContent = 'Mode Terang';
        localStorage.setItem('osis-theme', 'dark');
      }
    }

    // Event listeners
    searchInput.addEventListener('input', (e) => {
      const query = e.target.value;
      
      if (query.length > 0) {
        searchClear.classList.remove('hidden');
      } else {
        searchClear.classList.add('hidden');
      }
      
      performSearch(query);
    });

    searchClear.addEventListener('click', () => {
      searchInput.value = '';
      searchClear.classList.add('hidden');
      performSearch('');
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      // Alt + F to focus search
      if (e.altKey && e.key.toLowerCase() === 'f') {
        e.preventDefault();
        searchInput.focus();
      }
      
      // Ctrl + K to focus search
      if (e.ctrlKey && e.key.toLowerCase() === 'k') {
        e.preventDefault();
        searchInput.focus();
      }
    });

    // Event delegation for department actions
    departmentsGrid.addEventListener('click', (e) => {
      const toggleBtn = e.target.closest('.toggle-btn');
      const copyBtn = e.target.closest('.copy-btn');
      
      if (toggleBtn) {
        const deptId = toggleBtn.dataset.dept;
        toggleDepartment(deptId);
      }
      
      if (copyBtn) {
        const deptId = copyBtn.dataset.dept;
        copyDepartmentMembers(deptId);
      }
    });

    // Global action buttons
    themeToggle.addEventListener('click', toggleTheme);
    expandAll.addEventListener('click', expandAllDepartments);
    collapseAll.addEventListener('click', collapseAllDepartments);

    // Initialize theme from localStorage
    function initializeTheme() {
      if (localStorage.getItem('osis-theme') === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeToggle.querySelector('i').className = 'fas fa-sun';
        themeToggle.querySelector('span').textContent = 'Mode Terang';
      }
    }

    // Debounced search for better performance
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // Replace the immediate search with debounced version for better performance
    const debouncedSearch = debounce(performSearch, 300);
    searchInput.removeEventListener('input', performSearch);
    searchInput.addEventListener('input', (e) => {
      const query = e.target.value;
      
      if (query.length > 0) {
        searchClear.classList.remove('hidden');
      } else {
        searchClear.classList.add('hidden');
      }
      
      debouncedSearch(query);
    });

    // Initialize the application
    function initialize() {
      initializeTheme();
      renderDepartments();
      updateStats();
      
      // Add loading state management if needed
      document.body.style.opacity = '0';
      setTimeout(() => {
        document.body.style.transition = 'opacity 0.3s ease';
        document.body.style.opacity = '1';
      }, 100);
    }

    // Run initialization when DOM is loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initialize);
    } else {
      initialize();
    }

    // Expose functions globally for onclick handlers
    window.viewPhoto = viewPhoto;
  </script>
</body>
</html>